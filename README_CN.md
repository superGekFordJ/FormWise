# FormWise

[English Version](README.md)

FormWise 是一款旨在将问卷（PDF 或文本格式）转换为交互式 HTML 表单的应用程序。它利用 AI 进行解析和模式生成，支持客户端数据收集，并提供一个调查员仪表板用于数据查看和分析。此外，它还可以选择性地对收集到的结果进行服务器端 AI 分析。

## ✨ 核心功能

-   **问卷解析与模式生成 (由 Gemini API 驱动):** 应用程序接收用户上传的 PDF 或文本格式问卷，通过调用 Google 的 Gemini API 进行深度分析，智能地解析问卷内容，并自动生成一个结构化的数据模式（schema）。这个模式定义了表单中的各个问题、问题类型以及可能的选项，是后续生成交互式 HTML 表单的基础。
-   **交互式表单生成 (HTML):** 基于解析的问卷和数据模式生成独立的、交互式的 HTML 表单。
-   **客户端数据收集:** 生成的 HTML 表单负责收集用户响应并将其结构化为 JSON 对象。
-   **调查员仪表板 (客户端):** 允许调查员上传收集的 JSON 数据文件，进行查看和基本分析。
-   **可共享表单:** 生成可下载的 HTML 文件或可共享的 URL（托管时）以分发表单。
-   **结果共享与输出:** 用户可以轻松共享已完成的表单，并将收集的数据输出为 JSON 文件。
-   **服务器端 AI 分析 (计划中):** 在部署后端时，支持服务器端数据提交，并利用 AI 总结和分析收集到的结果。

*当前实现主要聚焦于客户端功能。服务器端 AI 分析是可选功能，并计划在未来进一步完善。项目未来也计划探索集成更多AI模型API以及支持生成更复杂的表单样式。*

## 核心工作流程与数据隐私

FormWise 的核心流程始于用户上传 `.txt` 或 `.pdf` 格式的问卷文件。这些文件会通过配置的 LLM (当前主要使用 Gemini API) 进行解析，AI 会智能地识别问卷中的问题、题型及选项，并生成结构化的数据模式 (schema)。

基于生成的数据模式，应用程序会在客户端生成独立的、交互式的 HTML 问卷文件。这些 HTML 文件包含了填写问卷所需的所有逻辑和样式，可以脱离服务器独立运行和分发，支持填写者在本地浏览器中完成问卷。

**关于数据隐私:**

*   **问卷解析阶段:** 上传的问卷内容会发送至配置的 AI 提供商（如 Google Gemini API）进行处理。**请注意，AI 提供商如何使用或处理您提交的数据，取决于该提供商的服务条款和隐私政策。在使用前，请务必查阅并理解您所使用的 AI 模型的服务条款。** FormWise 本身不会存储您的原始问卷文件在服务器端（除非您自行部署后端并实现相关功能）。
*   **填写数据阶段:** 填写者在生成的 HTML 问卷中输入的数据完全在客户端（填写者的浏览器）进行处理。填写完成后，填写的数据会即时结构化为 JSON 格式。
*   **数据处理与分发:** 填写者可以自由决定如何处理生成的 JSON 数据。当前版本主要支持填写者下载 JSON 文件，然后将此文件发送给调查者。调查者可以在 FormWise 的客户端仪表板中导入这些 JSON 文件进行查看和统计分析。这是一种强调数据主权和隐私的分发方式，数据流转由用户手动控制，不强制经过中心化服务器。

**未来计划:**

我们计划在未来版本中实现可选的服务器端数据上传功能，以便更方便地收集和汇整填写数据。同时，也将探索支持更复杂的问卷解析规则，并可能在调查者仪表板中集成更多由 LLM 驱动的分析和统计功能，以提供更强大的数据处理能力。

## 🛠️ 技术栈

-   **前端框架:** Next.js (使用 React)
-   **语言:** TypeScript
-   **AI 集成:** Genkit (这是一个开源的 AI 框架，我们使用它来编排与 Google Gemini API 的交互流程，包括问卷的解析和可选的服务器端结果分析。)
-   **样式:** Tailwind CSS
-   **UI 组件:** Shadcn/UI (或类似的基于 Radix UI 和 Tailwind CSS 的组件库)

## 📂 项目结构

所有核心源代码都位于 `src` 目录中，主要包含以下部分：

-   `src/ai/`: AI 相关逻辑、流程和配置。
-   `src/app/`: Next.js 应用程序页面和核心布局。
-   `src/components/`: 可复用的 React 组件，包括 UI 库组件 (`ui/`)。
-   `src/hooks/`: 自定义 React 钩子。
-   `src/lib/`: 库/实用功能函数。

详细的项目结构和文件说明，请参阅 [开发指南 (docs/development_guide.md)](docs/development_guide.md)。

## 🚀 开始使用

1.  **配置环境变量:**
    复制 `.env.example` 文件到项目根目录并重命名为 `.env`。
    ```bash
    cp .env.example .env
    ```
    然后编辑 `.env` 文件，将 `GOOGLE_API_KEY` 替换为您的 Google Gemini API 密钥。
    您可以从 [Google AI Studio](https://aistudio.google.com/apikey) 获取 API 密钥。

2.  **克隆仓库:**
    ```bash
    git clone <repository-url>
    cd FormWise
    ```
3.  **安装依赖:**
    ```bash
    npm install
    # 或者
    # yarn install
    ```
4.  **运行开发服务器:**
    ```bash
    npm run dev
    # 或者
    # yarn dev
    ```